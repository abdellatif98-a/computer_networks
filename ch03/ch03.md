# ch03
---
## Multiplexing and Demultiplexing
- Connectionless Demultiplexing
  - UDP socket identified by 2-tuple
    - Dest IP Address
    - Dest Port
  - _e.g._ `DatagramSocket serverSocket = new DatagramSocket(6428)`
- Connection-Oriented Demultiplexing
  - TCP socket identified by 4-tuple (i.e. _connection pairs are unique_)
    - Source IP Address
    - Source Port
    - Dest IP Address
    - Dest Port
## UDP
- Key Features:
  - No Connection Establishment
    - No Delay
  - No Connection State at Sender, Receiver
    - Simple & Cheap
  - Small Segment Header
    - Less Wasted Bandwidth
  - No Congestion Control
    - No Speed Limits
- why checksum at Transport level?
  - No guarantees that your link layer is reliable and is doing the checksum
  - End-to-End principle
    - _e.g._ TCP checksum vs. Application checksum
    - _e.g._ "smart" TCP vs. "dumb" IP
## Principles of Reliable Data Transfer
- How to build up a reliable channel on a unreliable channel?
  - ![build reliable](https://github.com/chopchap/computer-networking/blob/main/images/build%20reliable.png?raw=true)
- Pipelining Protocals
  - Go-Back-N
    - Sender
      - Up to N unACKed pkts in pipeline
    - Receiver
      - Only sends _cumulative_ ACKs
      - Doesn't ACK pkt if there's a gap
    - Sender
      - Timeer for oldest unACKed pkt
      - If timer expires, retransmit _all_ unACKed pkts
    - ![GBN](https://github.com/chopchap/computer-networking/blob/main/images/GBN.png?raw=true)
  - Selective Repeat
    - Sender
      - Up to N unACKed pkts in pipeline
    - Receiver
      - ACKs individual pkts
    - Sender
      - Timer for _each_ unACKed pkt
      - If timer expires, retransmit _only_ unACKed pkt
    - ![SR](https://github.com/chopchap/computer-networking/blob/main/images/selective%20repeat.png?raw=true)
## TCP
- Key Features:
  - Unicast (one-to-one communication)
  - Reliable, In-Order Byte Stream
  - Connection-Oriented
  - Pipelined
- TCP Round Trip Time and Timeout
  - EstimatedRTT = (1-α)\*EstimatedRTT + α\*SampleRTT
  - TimeOut = EstimatedRTT + "safety margin"
  - Safety Margin = Estimated Deviation of SampleRTT
  - DevRTT = (1-β)\*DevRTT + β\*|SampleRTT-EstimatedRTT|
  - TimeoutInterval = EstimatedRTT + 4*DevRTT
- TCP Reliable Data Transfer
  - Pipelined Segments
  - Cumulative ACKs
  - Single Retransmission Timer
  - Retransmissions Triggered by:
    - Timeouts
    - Duplicate ACKs
  - Fast Retransmit
    - If 3 ACKs received assume the worst
    - Resend segment **before** timer expires
- TCP Flow Control
  - ![tcp flow control](https://github.com/chopchap/computer-networking/blob/main/images/TCP%20flow%20control.png?raw=true)
- 3-Way Handshake
  - Client sends TCP SYN to server
    - Specifies Initial Seq #
    - No Data
  - Server receives SYN, replies with SYNACK
    - Server Allocates Buffers
    - Specifies Server Initial Seq #
    - No Data
  - Client receives SYNACK, replies with ACK
    - May Contain Data
- 4-steps Closing a TCP Connection
  - FIN sent
  - ACK sent
    - Receive FIN
    - Closes connection
    - Send FIN
  - ACK Received
    - Receive FIN
    - Replies with ACK
  - ACK Received
    - Connection Closed
- TCP Segment Structure
  - ![tcp seg structure](https://github.com/chopchap/computer-networking/blob/main/images/TCP%20segment%20structure.png?raw=true)
## Principles of Congestion Control
- 